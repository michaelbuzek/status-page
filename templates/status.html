<!DOCTYPE html>
<html>
<head>
    <title>Status</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 30px; }
        h1 { color: purple; }
        a { font-weight: bold; color: purple; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #333; padding: 8px; text-align: left; }
        th { background-color: #eee; }
        .status-open { background-color: sandybrown; }
        .status-done { background-color: lightgreen; }
    </style>
</head>
<body>
    <h1>TEST LAB</h1>
    <h2>Status Dashboard</h2>
    <hr>
    <p><a href="/admin">Admin</a></p>
    <table>
        <tr>
            <th>Auftrag</th>
            <th>Router</th>
            <th>Setup</th>
            <th>Firmware</th>
            <th>Setup-Check</th>
            <th>FW-Download</th>
            <th>Run-Test</th>
            <th>Status</th>
            <th>Report</th>
        </tr>
        {% for aid, data in auftraege.items() %}
        <tr>
            <td>{{ data.auftrag_id }}</td>
            <td>{{ data.router }}</td>
            <td>{{ data.setup }}</td>
            <td>{{ data.firmware }}</td>
            <td>{{ data.times.get('setup-check') }}</td>
            <td>{{ data.times.get('fw-download') }}</td>
            <td>{{ data.times.get('run-test') }}</td>
            <td class="status-{{ data.status }}">{{ data.status }}</td>
            <td>
                {% if data.report_url %}
                    <a href="{{ data.report_url }}" target="_blank">Report</a>
                {% else %}
                    None
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
</body>
</html>
